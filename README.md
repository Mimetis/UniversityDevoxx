# UniversityDevoxx

This project was generated with [Angular CLI](https://github.com/angular/angular-cli) version 1.0.0.

## Demo 02

Demo on integration of Bootstrap, 

## Step 01 Add Bootstrap V4

Adding `Bootstrap V4` (currently in Alpha) to our project, and managed by `Webpack` and `Angular CLI`
All the informations needed are available here [Boostrap V4 install](http://v4-alpha.getbootstrap.com/getting-started/download/)  

```
npm install bootstrap@4.0.0-alpha.6 --save
```

Now we can add all the JavaScript files we need in the `.angular-cli.json` config file :

```javascript
"scripts": [
  "../node_modules/jquery/dist/jquery.min.js",
  "../node_modules/tether/dist/js/tether.js",
  "../node_modules/bootstrap/dist/js/bootstrap.min.js"
],
```
and the style as well in the `/src/styles.css` :

```css
@import '~bootstrap/dist/css/bootstrap.min.css';

body {
  min-height: 75rem;
  padding-top: 4.5rem;
}
```
**Note** the body style is used globally and is not mandatory to include boostrap. We *will* need it when we will use the bootstrap nav bar :)


Then edit your `/src/app/room/room.component.html` :  

```html
<div class="body">
	<h2>Here's a list of Rooms availabe</h2>

	<ul class="list-group">
		<a *ngFor="let room of rooms" href="#" class="list-group-item list-group-item-action flex-column align-items-start">
			<div class="d-flex w-100 justify-content-between">
				<h5 class="mb-1">{{room.name}}</h5>
				<span class="badge badge-default badge-pill">{{room.capacity}}</span>
			</div>
			<p class="mb-1">{{room?.setup}}</p>
		</a>

	</ul>
</div>
```

## Step 02 Add generated code from Swagger

Take the code generated by swagger, already in the `/swagger` directory, and copy paste it in a new folder `/src/app/ms`.  

```
- /src
--  /app
---   /ms
---   configuration.ts
---   index.ts
---   variables.ts
----    /api
----      api.ts
----      VenueApi.ts
----    /model
----      models.ts
----      Room.ts
```

To be able to use this new services and classes, we need to import everything in the `/src/app/app.module.ts`:  

```javascript
import { VenueApi, BASE_PATH } from './ms/index';
```

Then add the provider `VenueApi` as an available provider, and affect the `BASE_PATH` value.  
In this sample, the `BASE_PATH` is an [OpaqueToken](https://angular.io/docs/ts/latest/api/core/index/OpaqueToken-class.html) but `OpaqueToken` is deprecated.  
I hope the next version of the Swagger generated code will use an [InjectionToken<T>](https://angular.io/docs/ts/latest/api/core/index/InjectionToken-class.html) instead !  
As we are in a generated code, we won't change that.  


```javascript
providers: [
  RoomService,
  VenueApi,
  { provide: BASE_PATH, useValue: "http://localhost:9292/conference-venue/api" },
  { provide: "roomServiceUrl", useValue: "http://localhost:9292/conference-venue/api" }
],
```

**Note** : `/src/app/room.service.ts` is obsolete now, you could delete it, and delete the reference to it, if you want.

Now we can change the `/src/app/room/room.component.ts` class to be able to work with the swagger service :

Inject both model `Room` and `VenueApi` service :

```javascript
import { Room, VenueApi } from '../ms/index';
```
Then replace the class methods like this :

```javascript
constructor(private roomService: VenueApi) { }

rooms: Array<Room>;
ngOnInit() {

  this.roomService.allRooms()
    .subscribe(r => this.rooms = r.sort((a,b) => a.capacity > b.capacity ? -1 : 1));

}
```

**Note** : we call the `sort()` method to sort all rooms by their `capacity` property.

## Further help

To get more help on the Angular CLI use `ng help` or go check out the [Angular CLI README](https://github.com/angular/angular-cli/blob/master/README.md).

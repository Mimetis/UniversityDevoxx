# UniversityDevoxx

This project was generated with [Angular CLI](https://github.com/angular/angular-cli) version 1.0.0.


## Step 00 : Use the docker container to be able to run all demos :

We are assuming you're are already familiar with Docker and you have Docker installed on your machine

```
docker pull agoncal/demo01 
docker pull agoncal/demo02
docker run -d -p 9191:9191 agoncal/demo01   
docker run -d -p 9292:9292 agoncal/demo02   
```

## Step 01 : Create and run the default template generated by Angular CLI

Run `ng new ngdevoxx`. `ngdevoxx` is the name of your application. Use the name you want.  

Run `ng serve` for a dev server. Navigate to `http://localhost:4200/`. The app will automatically reload if you change any of the source files.

## Step 02 : Create a component

Create a component to show how it's works in directory `/src/app`

```javascript
ng g component room
```

Show that it's already referenced in the `app.module.ts` module class.

add the component in the `app.component.html` component html file :

```
<app-room></app-room>
```

## Step 03 : Call to a service

We make a service in the `/src/app/room.component.ts`. After this step, we will migrate the function service in a real service :)  

We need to import `Rx` framework to be able to use the `Observable` :

```javascript
import { Observable } from 'rxjs/Observable';
import 'rxjs/Rx';
```

in `room.component.ts` create a `getRooms()` function to be able to returns some rooms :

```javascript

rooms = [];

ngOnInit() {
  this.getRooms()
  .subscribe(r => this.rooms = r);
}

getRooms(): Observable<Array<any>> {
  return Observable.of([
    { name: "room 1" },
    { name: "room 2" },
    { name: "room 3" },
  ]);
}
```

Then create a new service with `ng` command to replace last code in `src/app` :

```
ng g service room
```

Don't forget to make a reference in `app.module.ts` :

Import room service :
```javascript
import { RoomService } from './room.service';
```

Make it available everywhere :
```javascript
providers: [
    RoomService
  ],
```
Go back in `room.service.ts` to inject a string url in the service

Import Rx :
```javascript
import { Observable } from 'rxjs/Observable';
import 'rxjs/Rx';
```

We need to inject the correct `room service rest API url`, so we need to use the `Inject, Injectable` classes from `Angular`.   
We need `Http` as well, to be able to make a request :

```javascript
import { Injectable, Inject } from '@angular/core';
import { Http, Response } from '@angular/http';
```

Prepare the constructor :
```javascript
constructor(private http: Http, @Inject("roomServiceUrl") private url: string) { }
```

It's a **BAD IDEA to use a simple string as a key for injection**. Prefer use an `InjectionToken` ! But we are in a demo, and we will see the `InjectionToken` use after.

go to `src/app/app.module/ts` and explain how to inject for this `roomServiceUrl`key a value of string uri :


```javascript
providers: [
    RoomService,
    { provide: "roomServiceUrl", useValue: "http://localhost:9292/conference-venue/api" }
  ],
```

Now the url is injected in our service, so we can construct our service function `getRooms()` :
```javascript
getRooms(): Observable<Array<any>> {

  var allRooms = this.url  + "/rooms";

  return this.http.request(allRooms)
    .map(r => r.json());

}
```

Go back in the `/src/app/room/room.component.ts` and test your new service, after import it :

```javascript
import { RoomService } from '../room.service';
```
and then inject it in your component :

```javascript
constructor(private roomService: RoomService) { }

rooms = [];
ngOnInit() {

  this.roomService.getRooms()
    .subscribe(r => this.rooms = r);

}
```

## Further help

To get more help on the Angular CLI use `ng help` or go check out the [Angular CLI README](https://github.com/angular/angular-cli/blob/master/README.md).
